!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.toCache=t()}(this,function(){"use strict";var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();return new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._map={},this.Cache=t}return e(t,[{key:"has",value:function(e){return this._map.hasOwnProperty(e)}},{key:"get",value:function(e){return this.has(e)?this._map[e].value:null}},{key:"getAndCache",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.has(e)?this.get(e):t().then(function(t){return n.set(e,t,i),t})}},{key:"set",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.del(e);var u={value:t};i>0&&(u.timer=setTimeout(function(){n.del(e)},i)),this._map[e]=u}},{key:"del",value:function(e){return!!this.has(e)&&(clearTimeout(this._map[e].timer),delete this._map[e],!0)}},{key:"keys",value:function(){return Object.keys(this._map)}},{key:"size",value:function(){return this.keys().length}},{key:"clear",value:function(){this._map={}}}]),t}())});
